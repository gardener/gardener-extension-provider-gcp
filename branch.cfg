cfgs:
  default:
    branches: ['master']
    inherit:
      gardener-extension-provider-gcp-updates:
        jobs:
          create_update_pull_requests:
            repo:
              trigger: false
              disable_ci_skip: true
            steps: ~
            traits:
              component_descriptor:
                ocm_repository_mappings:
                - repository: europe-docker.pkg.dev/gardener-project/releases
                ocm_repository: europe-docker.pkg.dev/gardener-project/snapshots
              update_component_deps: ~
              cronjob:
                interval: '5m'
              version: ~
      gardener-extension-provider-gcp:
        base_definition:
          steps:
            verify:
              image: 'golang:1.23'
          repo:
            source_labels:
              - name: cloud.gardener.cnudie/dso/scanning-hints/source_analysis/v1
                value:
                  policy: skip
                  comment: |
                    we use gosec for sast scanning. See attached log.
        jobs:
          head-update:
            traits:
              release:
                release_commit_publishing_policy: skip
                release_on_github: false
                release_notes_policy: disabled
          release:
            traits:
              release:
                assets:
                - type: build-step-log
                  step_name: verify
                  purposes:
                    - lint
                    - sast
                    - gosec
                  comment: |
                    we use gosec (linter) for SAST scans
                    see: https://github.com/securego/gosec
                    enabled by https://github.com/gardener/gardener-extension-provider-gcp/pull/892

  temp:
    branches: ['temp.*']
    inherit:
      gardener-extension-provider-gcp:
        base_definition:
          traits:
            component_descriptor:
              retention_policies:
              - dry_run: false
                name: keep-all
                rules:
                - keep: all
                  match: snapshots
                  name: keep-snapshots
                  recursive: false
                  restrict: none
                - keep: all
                  match: releases
                  name: keep-releases
                  recursive: false
                  restrict: none
          steps:
            verify:
              image: 'golang:1.23'

  release-branches:
    index: 1
    branches: ['release-v1\..*']
    inherit:
      gardener-extension-provider-gcp:
        base_definition:
          steps:
            verify:
              image: 'golang:1.23'
          repo:
            source_labels:
              - name: cloud.gardener.cnudie/dso/scanning-hints/source_analysis/v1
                value:
                  policy: skip
                  comment: |
                    we use gosec for sast scanning. See attached log.
        jobs:
          release:
            traits:
              release:
                nextversion: 'bump_patch'
                assets:
                  - type: build-step-log
                    step_name: verify
                    purposes:
                      - lint
                      - sast
                      - gosec
                    comment: |
                      we use gosec (linter) for SAST scans
                      see: https://github.com/securego/gosec
                      enabled by https://github.com/gardener/gardener-extension-provider-gcp/pull/892

  release-branches-1-34:
    index: 2
    branches: ['release-v1\.34']
    inherit:
      gardener-extension-provider-gcp:
        base_definition:
          steps:
            verify:
              image: 'golang:1.21.1'

  release-branches-1-34:
    index: 2
    branches: ['release-v1\.38']
    inherit:
      gardener-extension-provider-gcp:
        base_definition:
          steps:
            verify:
              image: 'golang:1.22'
